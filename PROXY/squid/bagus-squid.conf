cache deny all
http_port 3128
#extra port
http_port 8080

acl localhost src 127.0.0.1/32
acl to_localhost dst 127.0.0.0/8
acl localnet src 0.0.0.0/8 3.1.58.120/32

acl Safe_ports port 1-65535	# all ports
#acl SSL_ports port 1-65535	# all ports
http_access allow all

acl CONNECT method CONNECT
dns_v4_first on
forwarded_for transparent
forwarded_for delete
via off

acl blockURL dstdomain "/etc/squid/blockURL"
http_access deny !Safe_ports
#http_access deny !SSL_ports
http_access deny blockURL
http_access deny all

access_log /var/log/squid/access.log squid

auth_param basic program /usr/lib/squid/basic_ncsa_auth /etc/squid/passwords
auth_param basic realm proxy
acl authenticated proxy_auth REQUIRED
http_access allow authenticated
#apt install apache2-utils
#htpasswd -c /etc/squid/passwords userxxx
